<html>
	<head>
		<div th:replace="fragments/resources :: headTags"></div>
		<title>Insert new pizza</title>
	</head>
	<body>
		<!-- container -->
		<div class="container">
			<h1>Insert new pizza</h1>
			<hr/>
			
			<!-- form -->
			<form
				id="pizza-form"
				th:object="${pizza}"
				th:action="${edit} ? @{/pizzas/edit/{id}(id=${pizza.id})} : @{/pizzas/create}"
				method="POST"> <!-- operazione ternaria per fargli capire se è un create o un update -->
				
				<!-- validazione -->
				<ul>
					<!-- itera su tutti errori form -->
					<li th:each="err : ${#fields.allErrors()}" th:text="${err}" class="text-danger"></li>
				</ul>
				
				<!-- campi form -->
				<div class="row">
				
					<!-- main details -->
					<div class="col-8">
						<div class="row gy-2">
							<div class="col-6">
								<label class="form-label" for="name">Name</label>
								<input type="text" class="form-control" id="name" th:field="*{name}">
							</div>
							<div class="col-6">
								<label class="form-label" for="price">Price</label>
								<input type="number" class="form-control" id="price" th:field="*{price}">
							</div>
							<div class="col-12">
								<label class="form-label" for="description">Description</label>
								<textarea class="form-control" id="description" th:field="*{description}" rows="6"></textarea>
							</div>
							<div class="col-12 mt-3">
								<button class="btn btn-primary" type="submit">Save</button> <!-- usiamo button (più adatto per form) -->
							</div>
						</div>
					</div>
					
					<!-- ingredients -->
					<div class="col-4">
						<h4>Ingredients</h4>
						<div class="form-check" th:each="ing : ${ingredientList}">
						  <input class="form-check-input" type="checkbox" th:id="|ingredient_${ing.id}|" th:value="${ing.id}" th:field="*{ingredients}">
						  <label class="form-check-label" th:for="|ingredient_${ing.id}|" th:text="${ing.ingredient}"></label>
						</div>
					</div>
				</div>
			</form>
		</div>
		
		<!-- scripts -->
		<div th:replace="fragments/resources :: scripts"></div>
	</body>
</html>
